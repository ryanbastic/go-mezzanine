{"components":{"schemas":{"CellResponse":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","examples":["https://example.com/schemas/CellResponse.json"],"format":"uri","readOnly":true,"type":"string"},"added_id":{"description":"Auto-incremented ID","format":"int64","type":"integer"},"body":{"description":"Stored JSON payload"},"column_name":{"description":"Column name","type":"string"},"created_at":{"description":"Creation timestamp","format":"date-time","type":"string"},"ref_key":{"description":"Reference key version","format":"int64","type":"integer"},"row_key":{"description":"Row key UUID","type":"string"}},"required":["added_id","row_key","column_name","ref_key","body","created_at"],"type":"object"},"ErrorDetail":{"additionalProperties":false,"properties":{"location":{"description":"Where the error occurred, e.g. 'body.items[3].tags' or 'path.thing-id'","type":"string"},"message":{"description":"Error message text","type":"string"},"value":{"description":"The value at the given location"}},"type":"object"},"ErrorModel":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","examples":["https://example.com/schemas/ErrorModel.json"],"format":"uri","readOnly":true,"type":"string"},"detail":{"description":"A human-readable explanation specific to this occurrence of the problem.","examples":["Property foo is required but is missing."],"type":"string"},"errors":{"description":"Optional list of individual error details","items":{"$ref":"#/components/schemas/ErrorDetail"},"type":["array","null"]},"instance":{"description":"A URI reference that identifies the specific occurrence of the problem.","examples":["https://example.com/error-log/abc123"],"format":"uri","type":"string"},"status":{"description":"HTTP status code","examples":[400],"format":"int64","type":"integer"},"title":{"description":"A short, human-readable summary of the problem type. This value should not change between occurrences of the error.","examples":["Bad Request"],"type":"string"},"type":{"default":"about:blank","description":"A URI reference to human-readable documentation for the error.","examples":["https://example.com/errors/example"],"format":"uri","type":"string"}},"type":"object"},"HealthResponse":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","examples":["https://example.com/schemas/HealthResponse.json"],"format":"uri","readOnly":true,"type":"string"},"status":{"description":"Service health status","examples":["ok"],"type":"string"}},"required":["status"],"type":"object"},"IndexEntryResponse":{"additionalProperties":false,"properties":{"added_id":{"description":"Auto-incremented ID","format":"int64","type":"integer"},"body":{"description":"Denormalized JSON payload"},"created_at":{"description":"Creation timestamp","format":"date-time","type":"string"},"row_key":{"description":"Row key UUID","type":"string"},"shard_key":{"description":"Shard key UUID","type":"string"}},"required":["added_id","shard_key","row_key","body","created_at"],"type":"object"},"RowResponse":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","examples":["https://example.com/schemas/RowResponse.json"],"format":"uri","readOnly":true,"type":"string"},"cells":{"description":"Latest cell per column","items":{"$ref":"#/components/schemas/CellResponse"},"type":["array","null"]},"row_key":{"description":"Row key UUID","type":"string"}},"required":["row_key","cells"],"type":"object"},"ShardCountResponse":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","examples":["https://example.com/schemas/ShardCountResponse.json"],"format":"uri","readOnly":true,"type":"string"},"num_shards":{"description":"Number of configured shards","examples":[64],"format":"int64","type":"integer"}},"required":["num_shards"],"type":"object"},"WriteCellBody":{"additionalProperties":false,"properties":{"$schema":{"description":"A URL to the JSON Schema for this object.","examples":["https://example.com/schemas/WriteCellBody.json"],"format":"uri","readOnly":true,"type":"string"},"body":{"description":"Arbitrary JSON payload"},"column_name":{"description":"Column name","minLength":1,"type":"string"},"ref_key":{"description":"Reference key version","format":"int64","type":"integer"},"row_key":{"description":"Row key UUID","type":"string"}},"required":["row_key","column_name","ref_key","body"],"type":"object"}}},"info":{"description":"Sharded cell-based data store","title":"Mezzanine API","version":"1.0.0"},"openapi":"3.1.0","paths":{"/v1/cells":{"post":{"operationId":"write-cell","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/WriteCellBody"}}},"required":true},"responses":{"201":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CellResponse"}}},"description":"Created"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"Write a cell","tags":["cells"]}},"/v1/cells/partitionRead":{"get":{"operationId":"partition-read","parameters":[{"description":"Partition number","explode":false,"in":"query","name":"partition_number","required":true,"schema":{"description":"Partition number","format":"int64","type":"integer"}},{"description":"Read type","explode":false,"in":"query","name":"read_type","required":true,"schema":{"description":"Read type","format":"int64","type":"integer"}},{"description":"Filter cells created after this timestamp","explode":false,"in":"query","name":"created_after","schema":{"description":"Filter cells created after this timestamp","format":"date-time","type":"string"}},{"description":"Filter cells added after ID","explode":false,"in":"query","name":"added_id","schema":{"description":"Filter cells added after ID","format":"int64","type":"integer"}},{"description":"Maximum number of cells to return","explode":false,"in":"query","name":"limit","schema":{"description":"Maximum number of cells to return","format":"int64","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/CellResponse"},"type":["array","null"]}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"Read a partition of cells","tags":["cells"]}},"/v1/cells/{row_key}":{"get":{"operationId":"get-row","parameters":[{"description":"Row key UUID","in":"path","name":"row_key","required":true,"schema":{"description":"Row key UUID","format":"uuid","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RowResponse"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"Get all latest cells for a row","tags":["cells"]}},"/v1/cells/{row_key}/{column_name}":{"get":{"operationId":"get-cell-latest","parameters":[{"description":"Row key UUID","in":"path","name":"row_key","required":true,"schema":{"description":"Row key UUID","format":"uuid","type":"string"}},{"description":"Column name","in":"path","name":"column_name","required":true,"schema":{"description":"Column name","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CellResponse"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"Get latest cell version","tags":["cells"]}},"/v1/cells/{row_key}/{column_name}/{ref_key}":{"get":{"operationId":"get-cell","parameters":[{"description":"Row key UUID","in":"path","name":"row_key","required":true,"schema":{"description":"Row key UUID","format":"uuid","type":"string"}},{"description":"Column name","in":"path","name":"column_name","required":true,"schema":{"description":"Column name","type":"string"}},{"description":"Reference key version","in":"path","name":"ref_key","required":true,"schema":{"description":"Reference key version","format":"int64","type":"integer"}}],"responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CellResponse"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"Get exact cell version","tags":["cells"]}},"/v1/health":{"get":{"operationId":"health-check","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthResponse"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"Health check","tags":["health"]}},"/v1/index/{index_name}/{shard_key}":{"get":{"operationId":"query-index","parameters":[{"description":"Secondary index name","in":"path","name":"index_name","required":true,"schema":{"description":"Secondary index name","type":"string"}},{"description":"Shard key UUID","in":"path","name":"shard_key","required":true,"schema":{"description":"Shard key UUID","format":"uuid","type":"string"}}],"responses":{"200":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/IndexEntryResponse"},"type":["array","null"]}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"Query secondary index","tags":["index"]}},"/v1/shards/count":{"get":{"operationId":"get-shard-count","responses":{"200":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShardCountResponse"}}},"description":"OK"},"default":{"content":{"application/problem+json":{"schema":{"$ref":"#/components/schemas/ErrorModel"}}},"description":"Error"}},"summary":"Get shard count","tags":["shards"]}}}}